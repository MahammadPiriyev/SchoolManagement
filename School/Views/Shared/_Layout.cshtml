@using Microsoft.AspNetCore.Identity

@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/css/sidebar.css" rel="stylesheet">

</head>
<body>
    <div class="sidebar d-flex flex-column">
        <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index"><img style="height: 70px; width:150px; object-fit:cover; margin-left:40px; margin-bottom:20px; cursor: pointer;" src="~/images/Admin+Panel.png" /></a>
        <div class="menu-section">
            <ul class="menu-item">
                <li><a asp-area="Admin" asp-controller="Dashboard" asp-action="Index"><i class="fa-solid fa-gauge-high"></i> <span>Dashboard</span></a></li>
            </ul>
        </div>

        <div class="menu-section">
            <h3>Workspace</h3>
            <div class="menu-item">
                <div class="dropdown">
                    <a href="javascript:void(0)" class="dropdown-btn">
                        <div>
                            <i class="fa-regular fa-user"></i>
                            <span>Students</span>
                        </div>
                        <i class="fa-solid fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-content">
                        <a asp-area="Admin" asp-controller="Student" asp-action="Index">View Students</a>
                        <a asp-area="Admin" asp-controller="Student" asp-action="Add">Add Student</a>
                    </div>
                </div>
                <div class="dropdown">
                    <a href="javascript:void(0)" class="dropdown-btn">
                        <div>
                            <i class="fa-solid fa-chalkboard-user"></i>
                            <span>Teachers</span>
                        </div>
                        <i class="fa-solid fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-content">
                        <a asp-area="Admin" asp-controller="Teacher" asp-action="Index">View Teachers</a>
                        <a asp-area="Admin" asp-controller="Teacher" asp-action="Add">Add Teacher</a>
                    </div>
                </div>                <a asp-area="Admin" asp-controller="Class" asp-action="Index"><i class="fa-solid fa-chalkboard"></i> <span>Classes</span></a></li>
                <a asp-area="Admin" asp-controller="Subject" asp-action="Index"><i class="fa-regular fa-newspaper"></i> <span>Subjects</span></a></li>
                <a asp-area="Admin" asp-controller="Report" asp-action="Index"><i class="fa-solid fa-magnifying-glass-chart"></i> <span>Reports</span></a></>
            </div>
        </div>
        @if (SignInManager.IsSignedIn(User))
        {
            <div class="menu-section">
                <h3>Auth</h3>
                <ul class="menu-item">
                    <li><a asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Dashboard", new { area = "Admin" })"><i class="bi bi-box-arrow-right"></i> <span>Logout</span></a></li>
                </ul>
            </div>
        }
    </div>
    <div class="main-content">
        @RenderBody()
    </div>
    <script src="https://kit.fontawesome.com/6a6d1c9932.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.js"></script>
    <script>
        // Get all dropdown buttons
        const dropdownBtns = document.querySelectorAll('.dropdown-btn');

        dropdownBtns.forEach(function(dropdownBtn) {
            dropdownBtn.addEventListener('click', function() {
                // Get the corresponding dropdown content
                const dropdownContent = this.nextElementSibling;
                dropdownContent.classList.toggle('show');
            });
        });
    </script>

    @RenderSection("Scripts", required: false)
    <partial name="_ValidationScriptsPartial.cshtml" />
</body>
</html>
